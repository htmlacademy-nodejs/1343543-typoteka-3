extends ../../_layouts/layout.pug
block content
  include ../../components/header/header-unauth.pug
  main.articles-category
    h1 #{activeCategory.name}
    section.articles-category__theme-list
      h2.visually-hidden Список тем
      ul.themes
        ul.themes
          each category of categories
            li.themes__item
              a(class=`themes__item-link ${category.id === activeCategory.id ? 'themes__item-link--active' : ''}` href=`/articles/category/${category.id}`)
                | #{category.name}
                sup #{category.count}
    section.articles-category__list.preview
      h2.visually-hidden Список превью статей
      ul.preview__list
        each article of articles
          li.preview__item
            ul.preview__breadcrumbs
              each category of article.categories
                li.preview__breadcrumbs-item
                  a.preview__breadcrumbs-link(href=`./${category.id}`) #{category.name}
            .preview__background
              img.preview__background-image(src=`../../img/${article.picture}@1x.jpg` width='460' height='240' srcset=`img/${article.picture}@1x.jpg 1x, img/${article.picture}@2x.jpg 2x` alt=`${article.title}`)
            time.preview__time(datetime=`${article.createdAt}`) #{formatDate(article.createdAt)}
            h3.preview__name
              a.preview__name-link(href=`../${article.id}`) #{article.title}
            p.preview__text #{article.announce}
            a.preview__comment(href='#')
              | Комментарии
              span.preview__cloud
              b.preview__comment-count #{article.comments.length}
