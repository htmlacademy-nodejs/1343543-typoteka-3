extends ../../_layouts/layout.pug
block content
  include ../../components/header/header-unauth.pug
  main.main-page
    h1.visually-hidden –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –±–ª–æ–≥–∞ –¢–∏–ø–æ—Ç–µ–∫–∞
    p
      | –°–∞–º—ã–π –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–≥ üëè
    if articles.length > 0
      section.main-page__theme-list
        h2.visually-hidden –°–ø–∏—Å–æ–∫ —Ç–µ–º
        ul.themes
          each category of categories
            li.themes__item
              a.themes__item-link(href=`/articles/category/${category.id}`)
                | #{category.name}
                sup #{category.count}
      .main-page__section-flex
        include ../../components/main/hot.pug
        include ../../components/main/last.pug
      section.main-page__list.preview
        h2.visually-hidden –°–ø–∏—Å–æ–∫ –ø—Ä–µ–≤—å—é —Å—Ç–∞—Ç–µ–π
        ul.preview__list
          each article of articles
            li.preview__item
              ul.preview__breadcrumbs
                each category of article.categories
                  li.preview__breadcrumbs-item
                    a.preview__breadcrumbs-link(href=`/articles/category/${category.id}`) #{category.name}
              .preview__background
                img.preview__background-image(src=`img/${article.picture}@1x.jpg` width='460' height='240' srcset=`img/${article.picture}@1x.jpg 1x, img/${article.picture}@2x.jpg 2x` alt=`${article.title}`)
              time.preview__time(datetime=`${article.createdAt}`) #{formatDate(article.createdAt)}
              h3.preview__name
                a.preview__name-link(href=`articles/${article.id}`) #{article.title}
              p.preview__text #{article.announce}
              a.preview__comment(href='#')
                | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
                span.preview__cloud
                b.preview__comment-count #{article.comments.length}
      +pagination(page, totalPages, 2, `?`)
    else
      include ../../components/main/empty.pug
